<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="angular"><title>路由的学习归纳 | 七罪的前端学习小天地</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">路由的学习归纳</h1><a id="logo" href="/.">七罪的前端学习小天地</a><p class="description">欢迎一起来探索前端的道路</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">路由的学习归纳</h1><div class="post-meta">Sep 14, 2018<span> | </span><span class="category"><a href="/categories/Angular/">Angular</a></span></div><div class="post-content"><h1 id="Router路由"><a href="#Router路由" class="headerlink" title="Router路由"></a>Router路由</h1><h2 id="最简单的路由"><a href="#最简单的路由" class="headerlink" title="最简单的路由"></a>最简单的路由</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul>
<li>安装Angular Router。</li>
</ul>
<p>在项目路径下安装，以下两种命令都可以使用</p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add @angular/router</span><br><span class="line">//OR</span><br><span class="line">npm i --save @angular/router</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>Base href</li>
</ul>
<p>在index.html的<head>标签内添加<base>标签。</head></p>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;title&gt;&lt;/title&gt;</span><br><span class="line">	&lt;base href=&quot;/&quot;&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure>
</code></pre><p>路由需要根据这个来确定应用程序的根目录。</p>
<h3 id="导入相应的模块"><a href="#导入相应的模块" class="headerlink" title="导入相应的模块"></a>导入相应的模块</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#123; BrowserModule &#125; from &apos;@angular/platform-browser&apos;;</span><br><span class="line">import &#123; NgModule &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123;RouterModule, Routes&#125; from &apos;@angular/router&apos;;</span><br><span class="line">import &#123; AppComponent &#125; from &apos;./app.component&apos;;</span><br><span class="line"></span><br><span class="line">export const ROUTES: Routes = [];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent</span><br><span class="line">  ],</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    RouterModule.forRoot(ROUTES)</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="配置路由"><a href="#配置路由" class="headerlink" title="配置路由"></a>配置路由</h3><ul>
<li>创建一个新的组件。</li>
</ul>
<p>这个新的组件用来设置视图内容<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-router-page&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;p&gt;我是路由视图1号&lt;/p&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class RouterPageComponent implements OnInit &#123;</span><br><span class="line"></span><br><span class="line">  constructor() &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>再创建一个新的组件</li>
</ul>
<p>这个组件用来设置初始的视图<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-welcome&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;h1&gt;欢迎&lt;/h1&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class WelcomeComponent &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>更新AppModule的代码</li>
</ul>
<p>未更新的部分已省略。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123; RouterPageComponent &#125; from &apos;./router-page/router-page.component&apos;;</span><br><span class="line">import &#123; WelcomeComponent &#125; from &apos;./welcome.component&apos;;</span><br><span class="line"></span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  &#123;path:&apos;&apos;, redirectTo: &apos;welcome&apos;, pathMatch: &apos;full&apos;&#125;,</span><br><span class="line">  &#123;path:&apos;welcome&apos;,component:WelcomeComponent&#125;,</span><br><span class="line">  &#123;path:&apos;page&apos;,component:RouterPageComponent&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent,</span><br><span class="line">    RouterPageComponent,</span><br><span class="line">	WelcomeComponent</span><br><span class="line">  ],</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p><code>path:&#39;&#39;</code>一般用于设置初始页面，配合<code>redirectTo</code>和<code>pathMatch</code>使用。</p>
</blockquote>
<blockquote>
<p><code>path</code>的内容前不可以加<code>/</code>，使用时才可以。</p>
</blockquote>
<blockquote>
<p>还有<code>path=&#39;**&#39;</code>，这是一个通配符，当请求的URL不匹配前面定义的路由表中的任何路径时，路由器就会选择这个路由，一般用于显示404页面。</p>
</blockquote>
<h3 id="使用路由"><a href="#使用路由" class="headerlink" title="使用路由"></a>使用路由</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-root&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;这是主页&lt;/h1&gt;</span><br><span class="line">      &lt;a routerLink=&quot;/page&quot;&gt;点击打开路由视图&lt;/a&gt;</span><br><span class="line">      &lt;router-outlet&gt;&lt;/router-outlet&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent &#123;</span><br><span class="line">  title = &apos;RouterDemo&apos;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h2 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h2><p>在原有的基础上，增加一个动态路由</p>
<h3 id="创建一个新的组件用于详情"><a href="#创建一个新的组件用于详情" class="headerlink" title="创建一个新的组件用于详情"></a>创建一个新的组件用于详情</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit, Input &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; ActivatedRoute &#125; from &apos;@angular/router&apos;;</span><br><span class="line">import &#123;Observable, of&#125; from &apos;rxjs&apos;;</span><br><span class="line">import &#123; User, USER &#125; from &apos;../mock-users&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-userlist&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h3&gt;Hi，这里是&#123;&#123;user?.name&#125;&#125;的地盘。&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class UserlistComponent implements OnInit &#123;</span><br><span class="line">  @Input() user:User;</span><br><span class="line">  public users;</span><br><span class="line">  constructor(private route:ActivatedRoute) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    this.onUser();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  onUser():void&#123;</span><br><span class="line">    let id=null;</span><br><span class="line">    if(this.route.snapshot&amp;&amp;this.route.snapshot.paramMap)&#123;</span><br><span class="line">       id = +this.route.snapshot.paramMap.get(&apos;id&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">    this.getUser(id)</span><br><span class="line">      .subscribe(user=&gt;this.user = user);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getUser(id:number):Observable&lt;User&gt;&#123;</span><br><span class="line">    return of(USER.find(user=&gt;user.id === id));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="更新主页，增加一个用户列表"><a href="#更新主页，增加一个用户列表" class="headerlink" title="更新主页，增加一个用户列表"></a>更新主页，增加一个用户列表</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; ActivatedRoute &#125; from &apos;@angular/router&apos;;</span><br><span class="line">import &#123;Observable, of&#125; from &apos;rxjs&apos;;</span><br><span class="line">import &#123; User, USER &#125; from &apos;./mock-users&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-root&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1&gt;这是主页&lt;/h1&gt;</span><br><span class="line">      &lt;a routerLink=&quot;/page&quot;&gt;点击打开路由视图&lt;/a&gt;</span><br><span class="line"></span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li *ngFor=&quot;let user of users&quot;&gt;</span><br><span class="line">          &lt;a routerLink=&quot;/userlist/&#123;&#123;user.id&#125;&#125;&quot;&gt;</span><br><span class="line">            &#123;&#123;user.name&#125;&#125;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">      &lt;router-outlet&gt;&lt;/router-outlet&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class AppComponent implements OnInit &#123;</span><br><span class="line">  users:User[];</span><br><span class="line">  constructor() &#123; &#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    this.getUsers()</span><br><span class="line">      .subscribe(users =&gt; this.users = users)</span><br><span class="line">  &#125;</span><br><span class="line">  getUsers():Observable&lt;User[]&gt;&#123;</span><br><span class="line">    return of(USER);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="更新AppModule组件"><a href="#更新AppModule组件" class="headerlink" title="更新AppModule组件"></a>更新AppModule组件</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123; UserlistComponent &#125; from &apos;./userlist/userlist.component&apos;;</span><br><span class="line"></span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  &#123;path:&apos;&apos;, redirectTo: &apos;/welcome&apos;, pathMatch: &apos;full&apos;&#125;,</span><br><span class="line">  &#123;path:&apos;welcome&apos;,component:WelcomeComponent&#125;,</span><br><span class="line">  &#123;path:&apos;userlist/:id&apos;,component:UserlistComponent&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent,</span><br><span class="line">    RouterPageComponent,</span><br><span class="line">    WelcomeComponent,</span><br><span class="line">    UserlistComponent</span><br><span class="line">  ],</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    RouterModule.forRoot(ROUTES)</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="创建一个模拟数据文件来协助完成动态的路由"><a href="#创建一个模拟数据文件来协助完成动态的路由" class="headerlink" title="创建一个模拟数据文件来协助完成动态的路由"></a>创建一个模拟数据文件来协助完成动态的路由</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">export class User&#123;</span><br><span class="line">    id:number;</span><br><span class="line">    name:string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export const USER:User[] = [</span><br><span class="line">    &#123;id:1,name:&quot;sin&quot;&#125;,</span><br><span class="line">    &#123;id:2,name:&quot;angular&quot;&#125;,</span><br><span class="line">    &#123;id:3,name:&quot;vue&quot;&#125;,</span><br><span class="line">    &#123;id:4,name:&quot;react&quot;&#125;,</span><br><span class="line">    &#123;id:5,name:&quot;jquery&quot;&#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</code></pre><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>动态路由在面对动态数据时会有极好的效果，感觉一般需要配合http请求和订阅模式等进行，更多的作用是作为一个动态数据的结构渲染，例如商城网站等。</p>
<h2 id="一些其他的东西"><a href="#一些其他的东西" class="headerlink" title="一些其他的东西"></a>一些其他的东西</h2><h3 id="child-routes"><a href="#child-routes" class="headerlink" title="child routes"></a>child routes</h3><ul>
<li>创建settings组件，作为父路由。</li>
</ul>
<p>这里使用settings作为父路由使用。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component, OnInit &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-settings&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;这是settings页面&lt;/p&gt;</span><br><span class="line">      &lt;button routerLink=&quot;/settings/profile&quot;&gt;profile&lt;/button&gt;</span><br><span class="line">      &lt;button routerLink=&quot;/settings/password&quot;&gt;password&lt;/button&gt;</span><br><span class="line">      &lt;router-outlet&gt;&lt;/router-outlet&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class SettingsComponent implements OnInit &#123;</span><br><span class="line"></span><br><span class="line">    constructor()&#123;&#125;</span><br><span class="line">    ngOnInit()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>创建子组件</li>
</ul>
<p>创建profile子组件，并添加一些内容方便分辨页面。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-profile&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;这是profile页面&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class ProfileComponent&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p>创建password，同样添加一些内容方便分辨。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Component &#125; from &apos;@angular/core&apos;;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  selector: &apos;app-password&apos;,</span><br><span class="line">  template: `</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;这是password页面&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  `</span><br><span class="line">&#125;)</span><br><span class="line">export class PasswordComponent&#123;&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>在AppModule中设置child routes</li>
</ul>
<p>注意要在declarations处声明。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123;SettingsComponent&#125; from &apos;./settings/settings&apos;;</span><br><span class="line">import &#123;ProfileComponent&#125; from &apos;./settings/profile&apos;;</span><br><span class="line">import &#123;PasswordComponent&#125; from &apos;./settings/password&apos;;</span><br><span class="line"></span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  ...</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;settings&apos;,</span><br><span class="line">    component: SettingsComponent,</span><br><span class="line">    children:[</span><br><span class="line">      &#123; path:&apos;profile&apos;,component:ProfileComponent &#125;,</span><br><span class="line">      &#123; path:&apos;password&apos;,component:PasswordComponent &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    ...</span><br><span class="line">    SettingsComponent,</span><br><span class="line">    ProfileComponent,</span><br><span class="line">    PasswordComponent</span><br><span class="line">  ],</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    RouterModule.forRoot(ROUTES)</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>总结</li>
</ul>
<p><code>child routes</code>感觉更多是一个使用嵌套式的路由结构时候的一个便捷写法，在面对嵌套结构时候使用，可以简化代码和编写过程，并且此嵌套可以嵌套多层。</p>
<h3 id="Component-less"><a href="#Component-less" class="headerlink" title="Component-less"></a>Component-less</h3><p>无组件路由可以对子路由进行分组，而且不需要依靠某个路由来进行此操作。</p>
<p>演示很简单，在原有的基础上，修改一下<code>AppModule</code>的路由设置即可，记得将之前的相关路由配置注释掉，这里还使用了<code>child routes</code>的可以嵌套多层的特点。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  ...</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;settings&apos;,</span><br><span class="line">    component: SettingsComponent,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;</span><br><span class="line">        path: &apos;&apos;,</span><br><span class="line">        children:[</span><br><span class="line">          &#123; path:&apos;profile&apos;,component:ProfileComponent &#125;,</span><br><span class="line">          &#123; path:&apos;password&apos;,component:PasswordComponent &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<p>无组件路由在使用的时候最大的特点就是不使用component。</p>
<h3 id="loadChildren"><a href="#loadChildren" class="headerlink" title="loadChildren"></a>loadChildren</h3><p>老规矩，在上述的Demo中进行添加修改。</p>
<ul>
<li>创建一个新的模组</li>
</ul>
<p>创建SettingsModule<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import &#123; NgModule &#125; from &apos;@angular/core&apos;;</span><br><span class="line">import &#123; CommonModule &#125; from &apos;@angular/common&apos;;</span><br><span class="line">import &#123; Routes, RouterModule &#125; from &apos;@angular/router&apos;;</span><br><span class="line">import &#123;SettingsComponent&#125; from &apos;./settings&apos;;</span><br><span class="line">import &#123;ProfileComponent&#125; from &apos;./profile&apos;;</span><br><span class="line">import &#123;PasswordComponent&#125; from &apos;./password&apos;;</span><br><span class="line"></span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;&apos;,</span><br><span class="line">    component: SettingsComponent,</span><br><span class="line">    children: [</span><br><span class="line">      &#123; path: &apos;profile&apos;, component: ProfileComponent &#125;,</span><br><span class="line">      &#123; path: &apos;password&apos;, component: PasswordComponent &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">    declarations: [</span><br><span class="line">        SettingsComponent,</span><br><span class="line">        ProfileComponent,</span><br><span class="line">        PasswordComponent</span><br><span class="line">      ],</span><br><span class="line">    imports: [</span><br><span class="line">        CommonModule,</span><br><span class="line">        RouterModule.forChild(ROUTES)</span><br><span class="line">    ],</span><br><span class="line">&#125;)</span><br><span class="line">export class SettingsModule &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>在AppModul中使用loadChildren</li>
</ul>
<p>这里需要将<code>NgModule</code>的<code>declarations</code>成员中的三个页面删去，否则多个地方重复声明同一个组件为成员会报错。<br>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">export const ROUTES: Routes = [</span><br><span class="line">  ...</span><br><span class="line">  &#123;</span><br><span class="line">    path: &apos;settings&apos;,</span><br><span class="line">    loadChildren: &apos;./settings/settings.module#SettingsModule&apos;</span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">@NgModule(&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;)</span><br><span class="line">export class AppModule &#123; &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="路由学习总结"><a href="#路由学习总结" class="headerlink" title="路由学习总结"></a>路由学习总结</h2><p>Router借鉴了浏览器的导航模型，在理解的时候，我们可以把每个<code>&lt;router-outlet&gt;</code>指令看作是一个浏览器页面，<code>routerLink</code>的参数就是浏览器的地址，然后触发相应的地址，就会在相应的“浏览器”页面里面进行一个“页面跳转”，然后改变<code>&lt;router-outlet&gt;</code>指令的内容。</p>
<p>对于我而言，Angular本身的开发，就是一个多组件化开发的过程，而Router则将这个多组件化开发的动态切换过程变得更加简单和容易化。并且路由的应用范围很广，频率也很高，是非常实用的技巧。</p>
<p>本章只是一个路由的初步学习，后续还会对路由的其他参数、服务的参数和路由守卫等知识点进行学习和归纳。</p>
</div><div class="tags"><a href="/tags/Angular/">Angular</a></div><div class="post-nav"><a class="pre" href="/2018/09/25/HttpClient的学习归纳/">HttpClient的学习归纳</a><a class="next" href="/2018/09/14/Hexo博客多终端管理/">Hexo博客多终端管理</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/">Angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/01/08/2018年总结/">2018年总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/23/ElementRef的学习归纳/">ElementRef的学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/10/自定义表单验证与跨字段交叉验证学习归纳/">自定义表单验证与跨字段交叉验证学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/25/HttpClient的学习归纳/">HttpClient的学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/路由的学习归纳/">路由的学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/Hexo博客多终端管理/">Hexo博客多终端管理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/表单学习归纳/">表单学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/绑定的学习归纳/">绑定的学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/自定义指令的学习归纳/">自定义指令的学习归纳</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/14/管道的学习归纳/">管道学习归纳</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.semlinker.com/" title="前端修仙之路" target="_blank">前端修仙之路</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">七罪的前端学习小天地.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>